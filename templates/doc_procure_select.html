
{% extends "jde_base.html" %}

{% load static %}

{% block title %}{{service.title}} {% endblock %}


{% block content %}


<div class="max-w-3xl mx-auto mt-10 bg-white shadow-md rounded-lg p-6">
    <p class="text-center text-4xl md:text-5xl font-extrabold pb-14">{{service.title}} </p>
    
        {% include service.temp %}
	
</div>

<div class="max-w-3xl mx-auto mt-10 bg-white shadow-md rounded-lg p-6 mb-40">
    
    <div class="bg-green-500 border border-lime-200 p-4 rounded-lg w-full">
                
        <div class="my-3">
            <p class="font-bold text-lg lg:text-xl pb-1 md:text-lg">Please select the category of document you want to process</p>
            <select name="document_type" class="w-full border rounded p-2 bg-white font-medium text-base lg:text-lg" id="procure-doc-type">
                <option value="">--NO DOCUMENT CATEGORY SELECTED-- </option>
                
                {% for option in service.items %}
                    <option value="{% url 'base:doc-procure-form-page' service.title|slugify forloop.counter0 %}#selected">{{ option.desc}}</option>
                {% endfor %}
                    
						</select>
						<!--<div class="bg-white p-2 group relative rounded-[4px]">
							<span class="text-gray-600">CHOOSE DOCUMENT CATEGORY</span>
							<div class="absolute bottom-full left-0 w-full  hidden group-hover:flex flex-col bg-gray-800 text-gray-100 font-medium rounded-xl border border-black">
								{% for item in service.items %}
								<p class="p-3 border-b border-dotted border-b-gray-500"><a href="{% url 'base:doc-procure-form-page' service.title|slugify forloop.counter0 %}#selected">{{item.desc}}</a></p>
								{% endfor %}
							</div>
						</div>-->
        </div>
    </div>
</div>

<!-- Prompt to Login or Continue as Guest -->
<div id="login-prompt" class="hidden fixed inset-0 bg-black bg-opacity-75 items-center justify-center z-50">
  <div class="bg-white rounded-2xl w-4/5 md:w-3/5 lg:w-1/2 shadow-lg text-left">
    <div class="p-4 lg:p-6 font-semibold md:text-lg">
        You are currently accessing this website as a Guest. Would you like to login/register, or you prefer to continue as a guest ?
        <p class="pt-3 flex justify-center gap-3 md:gap-5">
            <button class="inline-block px-3 py-1 rounded-[4px] bg-green-600 text-white"><a href="{% url 'base:auth' %}?next={% url 'base:service-page' service.title|slugify %}">Login / Register</a></button>
            <button class="inline-block px-3 py-1 rounded-[4px] bg-green-600 text-white" id="cancel-prompt">Continue as Guest</button>
        </p>
    </div>
  </div>
</div>
<input type="hidden" name="" id="user-authenticated" value="{% if user.is_authenticated %}true{% endif %}">
</div>

{% endblock %}

{% block scripts %}
{{ block.super }}

<script charset="utf-8">
	document.getElementById("procure-doc-type").addEventListener("change", function() {
	    var selectedValue = this.value;
			if (selectedValue) { // Ensure a valid selection is made
					window.location.href = selectedValue;
			}														    
	});
</script>
<script>
    document.addEventListener("DOMContentLoaded", function () {
        const promptDiv = document.getElementById("login-prompt");
        const userAuth = document.getElementById("user-authenticated").value;
        const cancelButton = document.getElementById("cancel-prompt");
        setTimeout(() => {
            if (userAuth == "true") {
                promptDiv.classList.remove("flex")
                promptDiv.classList.add("hidden")
            } else {
                promptDiv.classList.add("flex")
                promptDiv.classList.remove("hidden")
            }
        }, 3000)

        cancelButton.addEventListener("click", () => {
            promptDiv.classList.add("hidden");
        });
    })
</script>
{% endblock %}
